- name: Importar clave p√∫blica de Elasticsearch
  apt_key:
    url: https://artifacts.elastic.co/GPG-KEY-elasticsearch
    state: present

- name: Elasticsearch repository for 8.x packages
  apt_repository:
    repo: deb https://artifacts.elastic.co/packages/8.x/apt stable main
    state: present
    filename: elasticsearch-8.x
  when: version == 8

- name: Elasticsearch repository for 7.x packages
  apt_repository:
    repo: deb https://artifacts.elastic.co/packages/7.x/apt stable main
    state: present
    filename: elasticsearch-7.x
  when: version == 7

- name: Elasticsearch repository for 6.x packages
  apt_repository:
    repo: deb https://artifacts.elastic.co/packages/6.x/apt stable main
    state: present
    filename: elasticsearch-6.x
  when: version == 6
